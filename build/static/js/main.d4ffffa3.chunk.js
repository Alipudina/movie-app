(this["webpackJsonpali-profile"]=this["webpackJsonpali-profile"]||[]).push([[0],{46:function(e,t,a){e.exports=a(79)},51:function(e,t,a){},70:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(17),i=a.n(o),c=(a(51),a(27)),l=a.n(c),s=a(42),u=a(18),m=a(9),d=a(15),v=a(11),p=a(10),h=a(16),b=a(5),f=a(23),g=a(22),E=a.n(g),y=(a(70),"https://murmuring-wildwood-56410.herokuapp.com/movies/"),M=a(82),j=a(83),O=a(43),S=function(){return r.a.createElement(M.a,{fluid:!0},r.a.createElement(j.a,null,r.a.createElement(O.a,{className:"text-center bg-dark text-white p-5 text-uppercase h3 mb-0"},"List of Movies from Database")))},w=a(84),x=function(e){var t=e.movies,a=e.noMovies,n=e.disableDeleteButton,o=e.onUpdate,i=e.onDelete,c=e.searchedArray;return 0===t.length||a?null:r.a.createElement(w.a,{striped:!0,bordered:!0,hover:!0,className:"text-center"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Movie"),r.a.createElement("th",null,"Genre"),r.a.createElement("th",null,"Rate"))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement("tr",{key:e._id,style:{background:function(){for(var t=0;t<c.length;t++)if(e.name===c[t].name)return"lime"}()}},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.genre),r.a.createElement("td",null,e.rate),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return i(e)},disabled:n,className:"btn btn-danger"},"Delete")),r.a.createElement("td",null,r.a.createElement(h.c,{className:"btn btn-primary text-white",onClick:function(){return o(e._id)},to:"/movies/update/"},"Update")))}))))},A=function(e){Object(v.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement(M.a,{className:"text-center my-5"},r.a.createElement(h.b,{onClick:this.props.handleAddMovieButton,to:"/movies/add",className:"p-3 px-4 btn btn-success"},"Add Movie"))}}]),a}(n.Component),D=function(e){Object(v.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text bg-secondary text-white",id:"inputGroup-sizing-default"},"Search")),r.a.createElement("input",{onChange:function(t){return e.props.onSearch(t)},type:"text",className:"form-control search bg-secondary text-white","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-default",autoFocus:!0,placeholder:"search movie"})),this.props.noMovies&&r.a.createElement("div",{className:"alert alert-danger"},"No Result!"))}}]),a}(n.Component),T=a(14),N=a.n(T),k=a(85),B=a(86),C=a(30),U=a(21),F=a(45),I=a(87),G=function(e){var t=e.name,a=e.label,n=e.value,o=e.error,i=e.inputFocus,c=e.onChange;return r.a.createElement(B.a.Group,{controlId:"formBasicEmail"},r.a.createElement(B.a.Label,null,a),r.a.createElement(B.a.Control,{value:n,autoFocus:i,onChange:c,type:"text",name:t}),o&&r.a.createElement("div",{className:"alert alert-danger"},o))},L=function(e){Object(v.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={data:{},errors:{}},e.validate=function(){var t=N.a.validate(e.state.data,e.schema,{abortEarly:!1}).error;if(!t)return null;var a,n={},r=Object(F.a)(t.details);try{for(r.s();!(a=r.n()).done;){var o=a.value;n[o.path[0]]=o.message}}catch(i){r.e(i)}finally{r.f()}return n},e.handleSubmit=function(t){t.preventDefault();var a=e.validate();if(e.setState({errors:a||{}}),!a){var n=e.props.location.pathname;"/movies/add"===n&&e.props.doSubmitAddMovieForm(e.state.data),"/movies/update/"===n&&e.props.doSubmitUpdateMovieForm(e.state.data)}},e.validateProperty=function(t){var a=t.name,n=t.value,r=Object(U.a)({},a,n),o=Object(U.a)({},a,e.schema[a]),i=N.a.validate(r,o).error;return i?i.details[0].message:null},e.handleChange=function(t){var a=t.currentTarget,n=Object(C.a)({},e.state.errors),r=e.validateProperty(a);r?n[a.name]=r:delete n[a.name];var o=Object(C.a)({},e.state.data);o[a.name]=a.value,e.setState({data:o,errors:n})},e.renderButton=function(t){return r.a.createElement(I.a,{disabled:e.validate(),variant:"primary",type:"submit"},t)},e.renderInput=function(t,a){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.state,i=o.data,c=o.errors;return r.a.createElement(G,{name:t,label:a,value:i[t],onChange:e.handleChange,error:c[t],inputFocus:n})},e}return a}(n.Component),_=function(e){Object(v.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={data:{name:"",genre:"",rate:""},errors:{}},e.schema={name:N.a.string().min(3).required().label("Movie Name"),genre:N.a.string().min(3).required().label("Genre"),rate:N.a.number().min(1).max(10).required().label("Rate")},e}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement(k.a,null,r.a.createElement(j.a,null,r.a.createElement(O.a,{className:"text-center pb-3 text-uppercase h3"},"new movie")),r.a.createElement(B.a,{onSubmit:this.handleSubmit},this.renderInput("name","Movie Name",2),this.renderInput("genre","Genre"),this.renderInput("rate","Rate"),this.renderButton("Add Movie")),this.props.redirectToMovies&&r.a.createElement(b.a,{to:"/movies"}))}}]),a}(L),q=function(e){Object(v.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={data:{name:"",genre:"",rate:""},errors:{}},e.schema={name:N.a.string().min(3).required().label("Movie Name"),genre:N.a.string().min(3).required().label("Genre"),rate:N.a.number().min(1).max(10).required().label("Rate")},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.movieToUpdate,t={name:e[0].name,genre:e[0].genre,rate:e[0].rate};this.setState({data:t})}},{key:"render",value:function(){return this.props.movieToUpdate?r.a.createElement(k.a,null,r.a.createElement(j.a,null,r.a.createElement(O.a,{className:"text-center pb-3 text-uppercase h3"},"update movie")),r.a.createElement(B.a,{onSubmit:this.handleSubmit},this.renderInput("name","Movie Name",2),this.renderInput("genre","Genre",null),this.renderInput("rate","Rate",null),this.renderButton("Update")),this.props.redirectToMovies&&r.a.createElement(b.a,{to:"/movies"})):null}}]),a}(L),R=function(e){Object(v.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={movies:[],noMovies:!1,movieToUpdate:"",redirectToMovies:!1,disableDeleteButton:!1,searchedArray:[]},e.handleSearch=function(t){var a=Object(u.a)(e.state.movies),n=t.currentTarget.value,r=a.filter((function(e){return e.name.toLowerCase().startsWith(n.toLowerCase())})),o=a.filter((function(e){return!e.name.toLowerCase().startsWith(n.toLowerCase())})),i=[].concat(Object(u.a)(r),Object(u.a)(o));return 0===r.length&&n.length>0?e.setState({noMovies:!0}):(0===n.length&&(window.location="/movies"),e.setState({movies:i,noMovies:!1,searchedArray:r}))},e.handleDelete=function(t){var a=t._id;E.a.delete(y+a).then((function(t){var n=e.state.movies.filter((function(e){return e._id!==a}));e.setState({movies:n}),1===e.state.movies.length&&e.setState({disableDeleteButton:!0}),f.b.warning("Movie DELETED from database!")})).catch((function(e){return console.log("Delete Error ",e)}))},e.handleUpdateButton=function(t){var a=Object(u.a)(e.state.movies).filter((function(e){return e._id===t}));e.setState({movieToUpdate:a,redirectToMovies:!1})},e.handleAddMovieButton=function(){e.setState({redirectToMovies:!1})},e.doSubmitAddMovieForm=function(t){E.a.post(y+"add",t).then((function(t){var a=[].concat(Object(u.a)(e.state.movies),[t.data]);e.setState({movies:a,disableDeleteButton:!1}),f.b.success("Movie ADDED to database!"),setTimeout((function(){return e.setState({redirectToMovies:!0})}),1300)})).catch((function(e){return console.log(e.message)}))},e.doSubmitUpdateMovieForm=function(t){var a=e.state.movieToUpdate[0]._id;E.a.put(y+"update/"+a,t).then((function(e){return console.log(e)})).catch((function(e){return console.log("Update Error",e)}));var n=Object(u.a)(e.state.movies).map((function(e){return e._id===a&&(e.name=t.name,e.genre=t.genre,e.rate=t.rate),e}));e.setState({movies:n}),f.b.info("Movie UPDATED in database!"),setTimeout((function(){return e.setState({redirectToMovies:!0})}),1300)},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(y),e.next=3,E.a.get(y);case 3:t=e.sent,1===(a=t.data).length&&this.setState({disableDeleteButton:!0}),this.setState({movies:a});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.movies,n=t.noMovies,o=t.redirectToMovies,i=t.disableDeleteButton,c=t.searchedArray;return r.a.createElement(h.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(f.a,{autoClose:1200}),r.a.createElement(b.b,{path:"/movies",exact:!0,component:S}),r.a.createElement(b.b,{path:"/movies",exact:!0,render:function(t){return r.a.createElement(D,Object.assign({},t,{movies:a,onSearch:e.handleSearch,noMovies:n}))}}),r.a.createElement(b.b,{path:"/movies",exact:!0,render:function(t){return r.a.createElement(x,Object.assign({},t,{movies:a,onUpdate:e.handleUpdateButton,noMovies:n,disableDeleteButton:i,onDelete:e.handleDelete,searchedArray:c}))}}),r.a.createElement(b.b,{path:"/movies",exact:!0,render:function(){return r.a.createElement(A,{handleAddMovieButton:e.handleAddMovieButton})}}),r.a.createElement(b.b,{path:"/movies/add",render:function(t){return r.a.createElement(_,Object.assign({},t,{redirectToMovies:o,doSubmitAddMovieForm:e.doSubmitAddMovieForm}))}}),r.a.createElement(b.b,{path:"/movies/update",render:function(t){return r.a.createElement(q,Object.assign({},t,{movieToUpdate:e.state.movieToUpdate,doSubmitUpdateMovieForm:e.doSubmitUpdateMovieForm,redirectToMovies:o}))}}),r.a.createElement(b.a,{to:"/movies"})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(77),a(78);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[46,1,2]]]);
//# sourceMappingURL=main.d4ffffa3.chunk.js.map